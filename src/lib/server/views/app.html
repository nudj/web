<!DOCTYPE html>
<html>
<head>
  <%= helmet.title.toString() %>
  <%= helmet.meta.toString() %>
  <%= helmet.link.toString() %>
  <script>
    var intercomSettings = {
      app_id: <%= intercom_app_id %>,
      custom_launcher_selector: "#open-intercom"
    }
    <% if (fullname) { %>
    intercomSettings.name = <%= fullname %>
    <% } %>
    <% if (!fullname && email) { %>
    intercomSettings.name = <%= email %>
    <% } %>
    <% if (email) { %>
    intercomSettings.email = <%= email %>
    <% } %>
    <% if (created_at) { %>
    intercomSettings.created_at = <%= created_at %>
    <% } %>
    var data = <%= data %>
    var cssRenderedClassNames = <%= JSON.stringify(css.renderedClassNames) %>
  </script>
  <script>
    (function(){var b=window,a=b.Intercom;if("function"===typeof a)a("reattach_activator"),a("update",intercomSettings);else{var a=document,c=function(){c.c(arguments)};c.q=[];c.c=function(a){c.q.push(a)};b.Intercom=c;b=a.createElement("script");b.type="text/javascript";b.async=!0;b.src="https://widget.intercom.io/widget/fwqdxwzg";a=a.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a)}})()
  </script>
  <script>
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-WT43QJJ');
  </script>
  <style data-aphrodite><%= css.content %></style>
</head>
<body>
  <div id="app"><%= html %></div>
  <script src="https://cdn.jsdelivr.net/clipboard.js/1.6.0/clipboard.min.js"></script>
  <script>
    var copyButtons = document.querySelectorAll('[data-clipboard-text]')

    function restoreTitle (target, original) {
      setTimeout(function () {
        target.innerText = original
      }, 2000)
    }

    function changeTitle (event, newText) {
      var target = event.trigger.querySelector('[data-clipboard-label]') || event.trigger
      var original = target.innerText.toString()
      target.innerText = newText
      restoreTitle(target, original)
    }

    if (copyButtons && copyButtons.length) {
      var clipboard = new Clipboard('[data-clipboard-text]')
      clipboard.on('success', function (event) {
        changeTitle(event, 'Copied!')
      })
      clipboard.on('error', function (event) {
        changeTitle(event, 'No')
      })
    }
  </script>
  <script src="/assets/js/app.js"></script>
</body>
</html>
